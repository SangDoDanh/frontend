<div class="row">
  <h2>Student List</h2>
</div>

<div class="mt-3 list-studnet" *ngIf="students">
  <a routerLink="/add" class="btn btn-success btn-sm mt-2 mb-2"
    >+ Add new student</a
  >

  <form
    class="d-flex flex-wrap"
    [formGroup]="rfSearch"
    (ngSubmit)="onSubmitSearch()"
  >
    <div class="w-100 d-flex mb-2 mt-2">
      <div class="d-none">
        <label for="id">ID:</label>
        <input type="text" id="id" formControlName="id" />
      </div>

      <div>
        <label for="firstName">First Name:</label>
        <input type="text" id="firstName" formControlName="first_name" />
      </div>

      <div>
        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" formControlName="last_name" />
      </div>
    </div>

    <div class="w-100 d-flex mt-2 mb-2">
      <div>
        <label for="email">Email:</label>
        <input type="email" id="email" formControlName="email" />
      </div>

      <div>
        <label for="gender">Gender:</label>
        <select id="gender" formControlName="gender">
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
      </div>

      <div>
        <label for="classId">Class ID:</label>
        <input type="text" id="classId" formControlName="class_id" />
      </div>

      <button class="ms-2" type="submit">Filter</button>
    </div>
  </form>
  <p *ngIf="students.length == 0; else elseBlock">Student list is empty</p>
  <ng-template #elseBlock>
    <table class="table table-striped table-hover">
      <thead>
        <tr class="bg-dark text-white">
          <th scope="col">#</th>
          <th scope="col">First</th>
          <th scope="col">Last</th>
          <th scope="col">Email</th>
          <th scope="col">Gender</th>
          <th scope="col">Class</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="
            let s of students | paginate : { itemsPerPage: 6, currentPage: p }
          "
        >
          <th scope="row">{{ s.id }}</th>
          <td>{{ s.first_name }}</td>
          <td>{{ s.last_name }}</td>
          <td>{{ s.email }}</td>
          <td>{{ s.gender }}</td>
          <td>{{ s.class_id }}</td>
          <td>
            <a
              class="btn btn-sm btn-danger me-3"
              [routerLink]="'/delete/' + s.id"
              >Delete</a
            >
            <a class="btn btn-sm btn-warning" [routerLink]="'/edit/' + s.id"
              >Edit</a
            >
          </td>
        </tr>
      </tbody>
    </table>
  </ng-template>

  <pagination-controls (pageChange)="p = $event"></pagination-controls>
</div>
